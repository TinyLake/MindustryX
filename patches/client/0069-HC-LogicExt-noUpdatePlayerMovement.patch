From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sat, 5 Jul 2025 00:08:35 +0800
Subject: [PATCH] HC(LogicExt) noUpdatePlayerMovement

---
 core/src/mindustry/input/DesktopInput.java | 4 ++--
 core/src/mindustry/input/MobileInput.java  | 3 ++-
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/core/src/mindustry/input/DesktopInput.java b/core/src/mindustry/input/DesktopInput.java
index bb012f379aafab3daa06e2cfe9ec291d68aba66a..7277ea1b02972a73a3124ef1c885fee91d9b6793 100644
--- a/core/src/mindustry/input/DesktopInput.java
+++ b/core/src/mindustry/input/DesktopInput.java
@@ -442,7 +442,7 @@ public class DesktopInput extends InputHandler{
         }
 
         if(!player.dead() && !state.isPaused() && !scene.hasField() && !locked){
-            updateMovement(player.unit());
+            if(!LogicExt.noUpdatePlayerMovement) updateMovement(player.unit()); //MDTX: allow disabling movement updates
 
             if(Core.input.keyTap(Binding.respawn)){
                 controlledType = null;
@@ -501,7 +501,7 @@ public class DesktopInput extends InputHandler{
             pollInputPlayer();
         }
 
-        if(Core.input.keyRelease(Binding.select)){
+        if(Core.input.keyRelease(Binding.select) && !LogicExt.noUpdatePlayerMovement){
             player.shooting = false;
         }
 
diff --git a/core/src/mindustry/input/MobileInput.java b/core/src/mindustry/input/MobileInput.java
index 7dc19c08f6c2e32f83e58b5e132c0396bf92347e..f85a95f248f76151a1baccc9f2b25ac28bb3d56d 100644
--- a/core/src/mindustry/input/MobileInput.java
+++ b/core/src/mindustry/input/MobileInput.java
@@ -24,6 +24,7 @@ import mindustry.type.*;
 import mindustry.ui.*;
 import mindustry.world.*;
 import mindustry.world.blocks.*;
+import mindustryX.features.*;
 
 import static arc.Core.*;
 import static mindustry.Vars.*;
@@ -807,7 +808,7 @@ public class MobileInput extends InputHandler implements GestureListener{
         }
 
         if(!player.dead() && !state.isPaused() && !locked){
-            updateMovement(player.unit());
+            if(!LogicExt.noUpdatePlayerMovement) updateMovement(player.unit()); //MDTX: allow disabling movement updates
         }
 
         //reset state when not placing
