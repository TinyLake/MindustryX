From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sat, 5 Jul 2025 00:08:35 +0800
Subject: [PATCH] HC(LogicExt) noUpdatePlayerMovement

---
 core/src/mindustry/input/DesktopInput.java | 4 ++--
 core/src/mindustry/input/MobileInput.java  | 3 ++-
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/core/src/mindustry/input/DesktopInput.java b/core/src/mindustry/input/DesktopInput.java
index 0ce0831bd0e9e1bacd402ae15f7e8bb61caf159c..e6846dd08923b5014f0173cd1af32e89683f040b 100644
--- a/core/src/mindustry/input/DesktopInput.java
+++ b/core/src/mindustry/input/DesktopInput.java
@@ -439,7 +439,7 @@ public class DesktopInput extends InputHandler{
         }
 
         if(!player.dead() && !state.isPaused() && !scene.hasField() && !locked){
-            updateMovement(player.unit());
+            if(!LogicExt.noUpdatePlayerMovement) updateMovement(player.unit()); //MDTX: allow disabling movement updates
 
             if(Core.input.keyTap(Binding.respawn)){
                 controlledType = null;
@@ -498,7 +498,7 @@ public class DesktopInput extends InputHandler{
             pollInputPlayer();
         }
 
-        if(Core.input.keyRelease(Binding.select)){
+        if(Core.input.keyRelease(Binding.select) && !LogicExt.noUpdatePlayerMovement){
             player.shooting = false;
         }
 
diff --git a/core/src/mindustry/input/MobileInput.java b/core/src/mindustry/input/MobileInput.java
index aadb4f131566ff7c54e4a3605af046f7e9bce27e..d20506449878379ae9e3714976e432608180f3ca 100644
--- a/core/src/mindustry/input/MobileInput.java
+++ b/core/src/mindustry/input/MobileInput.java
@@ -24,6 +24,7 @@ import mindustry.type.*;
 import mindustry.ui.*;
 import mindustry.world.*;
 import mindustry.world.blocks.*;
+import mindustryX.features.*;
 
 import static arc.Core.*;
 import static mindustry.Vars.*;
@@ -805,7 +806,7 @@ public class MobileInput extends InputHandler implements GestureListener{
         }
 
         if(!player.dead() && !state.isPaused() && !locked){
-            updateMovement(player.unit());
+            if(!LogicExt.noUpdatePlayerMovement) updateMovement(player.unit()); //MDTX: allow disabling movement updates
         }
 
         //reset state when not placing
