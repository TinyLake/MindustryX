From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sat, 5 Jul 2025 00:08:35 +0800
Subject: [PATCH] HC(LogicExt) noUpdatePlayerMovement

---
 core/src/mindustry/input/DesktopInput.java | 4 ++--
 core/src/mindustry/input/MobileInput.java  | 3 ++-
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/core/src/mindustry/input/DesktopInput.java b/core/src/mindustry/input/DesktopInput.java
index eb32a3fc1ee7e603cb4f5a9a2b455dfc121f3bfd..3ebe1a9ef924f24e7b02b2075afbb180296f28d0 100644
--- a/core/src/mindustry/input/DesktopInput.java
+++ b/core/src/mindustry/input/DesktopInput.java
@@ -432,7 +432,7 @@ public class DesktopInput extends InputHandler{
         }
 
         if(!player.dead() && !state.isPaused() && !scene.hasField() && !locked){
-            updateMovement(player.unit());
+            if(!LogicExt.noUpdatePlayerMovement) updateMovement(player.unit()); //MDTX: allow disabling movement updates
 
             if(Core.input.keyTap(Binding.respawn)){
                 controlledType = null;
@@ -491,7 +491,7 @@ public class DesktopInput extends InputHandler{
             pollInputPlayer();
         }
 
-        if(Core.input.keyRelease(Binding.select)){
+        if(Core.input.keyRelease(Binding.select) && !LogicExt.noUpdatePlayerMovement){
             player.shooting = false;
         }
 
diff --git a/core/src/mindustry/input/MobileInput.java b/core/src/mindustry/input/MobileInput.java
index 3188f7e969cb29f2595a25793db85ff0b4284a11..efd03838db5ffc15768b50529c75b33d05f9e965 100644
--- a/core/src/mindustry/input/MobileInput.java
+++ b/core/src/mindustry/input/MobileInput.java
@@ -24,6 +24,7 @@ import mindustry.type.*;
 import mindustry.ui.*;
 import mindustry.world.*;
 import mindustry.world.blocks.*;
+import mindustryX.features.*;
 
 import static arc.Core.*;
 import static mindustry.Vars.*;
@@ -799,7 +800,7 @@ public class MobileInput extends InputHandler implements GestureListener{
         }
 
         if(!player.dead() && !state.isPaused() && !locked){
-            updateMovement(player.unit());
+            if(!LogicExt.noUpdatePlayerMovement) updateMovement(player.unit()); //MDTX: allow disabling movement updates
         }
 
         //reset state when not placing
