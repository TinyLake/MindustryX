From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Sun, 20 Jul 2025 13:26:18 +0800
Subject: [PATCH] UI: put UI.showInfoXXX into hudGroup

---
 core/src/mindustry/core/UI.java | 25 ++++++++++++++-----------
 1 file changed, 14 insertions(+), 11 deletions(-)

diff --git a/core/src/mindustry/core/UI.java b/core/src/mindustry/core/UI.java
index 683b40efb719d01a80eb0d5ea72c83a7e62f136e..54ca04aaafdf8e6fa86fb4b65ac8c4d00f3d5d75 100644
--- a/core/src/mindustry/core/UI.java
+++ b/core/src/mindustry/core/UI.java
@@ -48,7 +48,7 @@ public class UI implements ApplicationListener, Loadable{
     public LoadingFragment loadfrag;
     public HintsFragment hints;
 
-    public WidgetGroup menuGroup, hudGroup;
+    public WidgetGroup menuGroup, hudGroup, messageGroup;
 
     public AboutDialog about;
     public GameOverDialog restart;
@@ -177,6 +177,7 @@ public class UI implements ApplicationListener, Loadable{
 
         menuGroup = new WidgetGroup();
         hudGroup = new WidgetGroup();
+        messageGroup = new WidgetGroup();
 
         menufrag = new MenuFragment();
         hudfrag = new HudFragment();
@@ -224,6 +225,8 @@ public class UI implements ApplicationListener, Loadable{
         hudGroup.setFillParent(true);
         hudGroup.touchable = Touchable.childrenOnly;
         hudGroup.visible(() -> state.isGame());
+        messageGroup.setFillParent(true);
+        messageGroup.touchable = Touchable.disabled;
 
         Core.scene.add(menuGroup);
         Core.scene.add(hudGroup);
@@ -236,6 +239,12 @@ public class UI implements ApplicationListener, Loadable{
         consolefrag.build(hudGroup);
         loadfrag.build(group);
         new FadeInFragment().build(group);
+
+        hudGroup.addChild(messageGroup);
+        Events.on(ResetEvent.class, e -> {
+            messageGroup.clearChildren();
+            hudfrag.toggleHudText(false);
+        });
     }
 
     @Override
@@ -351,7 +360,7 @@ public class UI implements ApplicationListener, Loadable{
         if(cinfo.visible && !state.isMenu()) table.marginTop(cinfo.getPrefHeight() / Scl.scl() / 2);
         table.actions(Actions.fadeOut(duration, Interp.fade), Actions.remove());
         table.top().add(info).style(Styles.outlineLabel).padTop(10);
-        Core.scene.add(table);
+        messageGroup.addChild(table);
     }
 
     public void addDescTooltip(Element elem, String description){
@@ -379,12 +388,9 @@ public class UI implements ApplicationListener, Loadable{
         table.touchable = Touchable.disabled;
         table.setFillParent(true);
         if(cinfo.visible && !state.isMenu()) table.marginTop(cinfo.getPrefHeight() / Scl.scl() / 2);
-        table.update(() -> {
-            if(state.isMenu()) table.remove();
-        });
         table.actions(Actions.delay(duration * 0.9f), Actions.fadeOut(duration * 0.1f, Interp.fade), Actions.remove());
         table.top().table(Styles.black3, t -> t.margin(4).add(info).style(Styles.outlineLabel)).padTop(10);
-        Core.scene.add(table);
+        messageGroup.addChild(table);
         lastAnnouncement = table;
     }
 
@@ -393,12 +399,9 @@ public class UI implements ApplicationListener, Loadable{
         Table table = new Table();
         table.setFillParent(true);
         table.touchable = Touchable.disabled;
-        table.update(() -> {
-            if(state.isMenu()) table.remove();
-        });
         table.actions(Actions.delay(duration), Actions.remove());
         table.align(align).table(Styles.black3, t -> t.margin(4).add(info).style(Styles.outlineLabel)).pad(top, left, bottom, right);
-        Core.scene.add(table);
+        messageGroup.addChild(table);
     }
 
     /** Shows a label in the world. This label is behind everything. Does not fade. */
@@ -601,7 +604,7 @@ public class UI implements ApplicationListener, Loadable{
         t.actions(Actions.fadeOut(Math.min(duration,30f), Interp.pow4In), Actions.remove());
         t.pack();
         t.act(0.1f);
-        Core.scene.add(t);
+        messageGroup.addChild(t);
         lastAnnouncement = t;
     }
 
